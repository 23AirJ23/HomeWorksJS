<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible"
		content="IE=edge">
	<meta name="viewport"
		content="width=device-width, initial-scale=1.0">
	<title>Task 4</title>
</head>

<body>
	<h1 style="font-size: 25px">Завдання 4. Створити клас TBankomat, який моделює роботу банкомата. Клас повинен містити
		поля для зберігання кількості купюр кожного із номіналів від 5 до 200 гривень. Реалізувати методи знаходження
		максимальної та мінімальної сум, які може видати банкомат, та метод зняття деякої суми.</h1>
	<script>
		class TBankomat {
			constructor() {
				this.banknots = [
					{
						value: 200,
						quantity: 300
					},
					{
						value: 100,
						quantity: 250
					},
					{
						value: 50,
						quantity: 540
					},
					{
						value: 20,
						quantity: 800
					},
					{
						value: 10,
						quantity: 670
					},
					{
						value: 5,
						quantity: 100
					}
				]
			}

			get MaxSumm() {
				let summ = 0
				for (const banknot of this.banknots.reverse()) {
					if (banknot.quantity > 0)
						summ += banknot.value * banknot.quantity
				}
				return summ
			}

			get MinSumm() {
				for (const banknot of this.banknots) {
					if (banknot.quantity > 0)
						return banknot.value
				}
			}

			CashWithdrawal(summ) {
				if (summ > this.MaxSumm) {
					throw new Error(`Недостатньо коштів для знаття`)
				}
				while (summ > 0) {
					for (let i = 0; i < this.banknots.length; i++) {
						let temp = this.banknots[i]
						let amountOfBanknots = Math.floor(summ / temp.value)
						let minavailable = Math.min(amountOfBanknots, temp.quantity)
						if (minavailable >= 1) {
							summ -= minavailable * temp.value
							this.banknots[i].quantity -= minavailable
						}
					}
				}
				return `Успішна операція`
			}
		}

		let r = new TBankomat()
		document.write(`Максимальна сумма: ${r.MaxSumm}<br>`)
		document.write(`Мінімальна сумма: ${r.MinSumm}<br>`)
		document.write(`${r.CashWithdrawal(1255)}<br>`)
		console.log(r.banknots);
	</script>
</body>

</html>